<div class="container">
  <h1 class="page-title">Consultas Din√°micas</h1>
  
  <div class="form-section">
    <div class="form-group">
      <label for="tablaSelect" class="form-label">Seleccione una tabla:</label>
      <select 
        id="tablaSelect" 
        class="form-select" 
        [(ngModel)]="tablaSeleccionada"
        (change)="onTablaSeleccionada()"
      >
        <option value="">-- Seleccione una tabla --</option>
        <option *ngFor="let tabla of tablasDisponibles" [value]="tabla">
          {{ tabla | titlecase }}
        </option>
      </select>
    </div>
  </div>

  <div *ngIf="cargando" class="loading-container">
    <div class="spinner"></div>
    <span class="loading-text">Cargando datos...</span>
  </div>

  <div *ngIf="error" class="error-container">
    <p class="error-text">{{ error }}</p>
  </div>

  <div *ngIf="datos.length > 0" class="results-section">
    <h2 class="results-header">Resultados de {{ tablaSeleccionada | titlecase }}</h2>
    <div class="table-container">
      <table class="data-table">
        <thead class="table-header">
          <tr>
            <th *ngFor="let key of getKeys(datos[0])">{{ key | titlecase }}</th>
          </tr>
        </thead>
        <tbody class="table-body">
          <tr *ngFor="let item of datos">
            <td *ngFor="let key of getKeys(item)">{{ item[key] }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
